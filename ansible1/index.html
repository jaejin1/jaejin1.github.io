<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Create aws vpc using ansible - </title><meta name="Description" content="This is jaejin&#39;s blog"><meta property="og:title" content="Create aws vpc using ansible" />
<meta property="og:description" content="Ansible을 공부하면서 AWS의 VPC를 생성해보고, peering까지 해보자." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/ansible1/" />
<meta property="og:image" content="http://example.org/images/jaejin.png"/>
<meta property="article:published_time" content="2019-01-24T15:58:26+08:00" />
<meta property="article:modified_time" content="2019-01-24T15:58:26+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://example.org/images/jaejin.png"/>

<meta name="twitter:title" content="Create aws vpc using ansible"/>
<meta name="twitter:description" content="Ansible을 공부하면서 AWS의 VPC를 생성해보고, peering까지 해보자."/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/ansible1/" /><link rel="prev" href="http://example.org/argo/" /><link rel="next" href="http://example.org/searchguard/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Create aws vpc using ansible",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/ansible1\/"
        },"genre": "posts","keywords": "ansible, aws, devops","wordcount":  918 ,
        "url": "http:\/\/example.org\/ansible1\/","datePublished": "2019-01-24T15:58:26+08:00","dateModified": "2019-01-24T15:58:26+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Jaejin"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="">Jaejin&#39;s blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="">Jaejin&#39;s blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Create aws vpc using ansible</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://jaejin1.github.io" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jaejin</a></span>&nbsp;<span class="post-category">included in <a href="/categories/ansible/"><i class="far fa-folder fa-fw"></i>ansible</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2019-01-24">2019-01-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;918 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;5 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#vpc-설정">vpc 설정</a>
      <ul>
        <li><a href="#ansible-playbook으로-vpc-생성">Ansible playbook으로 VPC 생성</a></li>
        <li><a href="#peering">Peering</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Ansible을 공부하면서 AWS의 VPC를 생성해보고, peering까지 해보자.</p>
<h2 id="vpc-설정">vpc 설정</h2>
<h3 id="ansible-playbook으로-vpc-생성">Ansible playbook으로 VPC 생성</h3>
<p>이번 글은 Ansible을 이용해 VPC를 생성하고 수동으로 VPC peering을 해보고자 한다.</p>
<p><a href="https://jeremievallee.com/2016/07/27/aws-vpc-ansible.html" target="_blank" rel="noopener noreffer">Set up your AWS VPC with Ansible 2.0</a></p>
<p>먼저 playbook을 다음과 같은 구조로 만들것이다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">├── playbook.yml
├── inventory
├── vars.yml
├── roles/
│   ├── vpc/
│   │   ├── tasks/
│   │   │   ├── main.yml
</code></pre></td></tr></table>
</div>
</div><p>main파일인 playbook.yml 을 다음과 같이 정의한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="w">
</span><span class="w"></span>- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">local</span><span class="w">
</span><span class="w">    </span><span class="nt">roles</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">vpc</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>다음은 playbook을 실행할때 사용할 inventory file이다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="p">[</span><span class="l">local]</span><span class="w">
</span><span class="w"></span><span class="l">localhost ansible_connection=local</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Note<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">[localhost -&gt; localhost]: FAILED! =&gt; {&ldquo;changed&rdquo;: false, &ldquo;msg&rdquo;: &ldquo;Python modules &quot;botocore&quot; or &quot;boto3&quot; are missing, please install both&rdquo;}
이런 에러가 발생 할수도 있다. 이때는 inventory file을 변경해줘야한다.</div>
        </div>
    </div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="p">[</span><span class="l">local]</span><span class="w">
</span><span class="w"></span><span class="l">localhost</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="p">[</span><span class="l">webserver]</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>localhost 뒤에 추가 해줘야한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="p">[</span><span class="l">local]</span><span class="w">
</span><span class="w"></span><span class="l">localhost ansible_connection=local ansible_python_interpreter=python3.6</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="p">[</span><span class="l">webserver]</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><hr>
<p>마지막으로 variables을 정의하자.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nn">---</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c">## AWS Credentials</span><span class="w">
</span><span class="w"></span><span class="nt">aws_access_key</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;THISISMYAWSACCESSKEY&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">aws_secret_key</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ThisIsMyAwSSecretKey&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">aws_region</span><span class="p">:</span><span class="w">     </span><span class="s2">&#34;eu-west-1&#34;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c">## VPC Information</span><span class="w">
</span><span class="w"></span><span class="nt">vpc_name</span><span class="p">:</span><span class="w">       </span><span class="s2">&#34;My VPC&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">vpc_cidr_block</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;10.0.0.0/16&#34;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c">## For Security Group Rule</span><span class="w">
</span><span class="w"></span><span class="c">#my_ip:          &#34;X.X.X.X&#34;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c">## Subnets</span><span class="w">
</span><span class="w"></span><span class="nt">public_subnet_1_cidr</span><span class="p">:</span><span class="w">  </span><span class="s2">&#34;10.0.0.0/24&#34;</span><span class="w">
</span><span class="w"></span><span class="l">```yaml</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="l">이제 VPC를 만들 파일을 만들어보자.</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="l">```yaml</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># roles/vpc/tasks/main.yml</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># First task : creating the VPC.</span><span class="w">
</span><span class="w"></span><span class="c"># We are using the variables set in the vars.yml file.</span><span class="w">
</span><span class="w"></span><span class="c"># The module gives us back its result,</span><span class="w">
</span><span class="w"></span><span class="c"># which contains information about our new VPC. </span><span class="w">
</span><span class="w"></span><span class="c"># We register it in the variable my_vpc.</span><span class="w">
</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w">               </span><span class="l">Create VPC</span><span class="w">
</span><span class="w">    </span><span class="nt">ec2_vpc_net</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w">             </span><span class="s2">&#34;{{ vpc_name }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">cidr_block</span><span class="p">:</span><span class="w">       </span><span class="s2">&#34;{{ vpc_cidr_block }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;{{ aws_region }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">aws_access_key</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;{{ aws_access_key }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">aws_secret_key</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;{{ aws_secret_key }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w">            </span><span class="s2">&#34;present&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l">my_vpc</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># We now use the set_fact module </span><span class="w">
</span><span class="w"></span><span class="c"># to save the id of the VPC in a new variable.</span><span class="w">
</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w">               </span><span class="l">Set VPC ID in variable</span><span class="w">
</span><span class="w">    </span><span class="nt">set_fact</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;{{ my_vpc.vpc.id }}&#34;</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># Creating our only Subnet in the VPC.</span><span class="w">
</span><span class="w"></span><span class="c"># A subnet needs to be located in an Availability Zone (or AZ).</span><span class="w">
</span><span class="w"></span><span class="c"># Again, we register the results in a variable for later.</span><span class="w">
</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w">               </span><span class="l">Create Public Subnet</span><span class="w">
</span><span class="w">    </span><span class="nt">ec2_vpc_subnet</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w">            </span><span class="s2">&#34;present&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;{{ vpc_id }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">cidr</span><span class="p">:</span><span class="w">             </span><span class="s2">&#34;{{ public_subnet_1_cidr }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">az</span><span class="p">:</span><span class="w">               </span><span class="s2">&#34;{{ aws_region }}a&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;{{ aws_region }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">aws_access_key</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;{{ aws_access_key }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">aws_secret_key</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;{{ aws_secret_key }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="c">#map_public:       &#34;yes&#34; # vpc가 instance를 생성할때 자동으로 public ip를 할당하게 하는 옵션 ( default: false )</span><span class="w">
</span><span class="w">        </span><span class="nt">resource_tags</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">Name</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;Public Subnet&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l">my_public_subnet</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># We save the id of the Public Subnet in a new variable.</span><span class="w">
</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w">               </span><span class="l">Set Public Subnet ID in variable</span><span class="w">
</span><span class="w">    </span><span class="nt">set_fact</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">public_subnet_id</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;{{ my_public_subnet.subnet.id }}&#34;</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># Every VPC needs at least one Internet Gateway.</span><span class="w">
</span><span class="w"></span><span class="c"># This component allows traffic between the VPC and the outside world.</span><span class="w">
</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w">               </span><span class="l">Create Internet Gateway for VPC</span><span class="w">
</span><span class="w">    </span><span class="nt">ec2_vpc_igw</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;{{ vpc_id }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;{{ aws_region }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">aws_access_key</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;{{ aws_access_key }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">aws_secret_key</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;{{ aws_secret_key }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w">            </span><span class="s2">&#34;present&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l">my_vpc_igw</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># We save the id of the Internet Gateway in a new variable.</span><span class="w">
</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w">               </span><span class="l">Set Internet Gateway ID in variable</span><span class="w">
</span><span class="w">    </span><span class="nt">set_fact</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">igw_id</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;{{ my_vpc_igw.gateway_id }}&#34;</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># Now we set up a Route Table. </span><span class="w">
</span><span class="w"></span><span class="c"># We attach that Route Table to the Public Subnet.</span><span class="w">
</span><span class="w"></span><span class="c"># The route we create here defines the default routing </span><span class="w">
</span><span class="w"></span><span class="c"># of the table, redirecting requests to the Internet Gateway. </span><span class="w">
</span><span class="w"></span><span class="c"># We don&#39;t see it here, but the route table will also contain </span><span class="w">
</span><span class="w"></span><span class="c"># a route for resources inside the VPC, so that if we need </span><span class="w">
</span><span class="w"></span><span class="c"># to reach an internal resource, we don&#39;t go to the Internet</span><span class="w">
</span><span class="w"></span><span class="c"># Gateway.</span><span class="w">
</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w">               </span><span class="l">Set up public subnet route table</span><span class="w">
</span><span class="w">    </span><span class="nt">ec2_vpc_route_table</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;{{ vpc_id }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;{{ aws_region }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">aws_access_key</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;{{ aws_access_key }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">aws_secret_key</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;{{ aws_secret_key }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">tags</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">Name</span><span class="p">:</span><span class="w">           </span><span class="s2">&#34;Public&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">subnets</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="s2">&#34;{{ public_subnet_id }}&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">routes</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="nt">dest</span><span class="p">:</span><span class="w">         </span><span class="s2">&#34;0.0.0.0/0&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">gateway_id</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;{{ igw_id }}&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>이제 실행해보자.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ ansible-playbook playbook.yml -i inventory -e @vars.yml

PLAY <span class="o">[</span>local<span class="o">]</span> ****************************************************************************************

TASK <span class="o">[</span>Gathering Facts<span class="o">]</span> ******************************************************************************
ok: <span class="o">[</span>localhost<span class="o">]</span>

TASK <span class="o">[</span>vpc : Create VPC<span class="o">]</span> *****************************************************************************
changed: <span class="o">[</span>localhost<span class="o">]</span>

TASK <span class="o">[</span>vpc : Set VPC ID in variable<span class="o">]</span> *****************************************************************
ok: <span class="o">[</span>localhost<span class="o">]</span>

TASK <span class="o">[</span>vpc : Create Public Subnet<span class="o">]</span> *******************************************************************
changed: <span class="o">[</span>localhost<span class="o">]</span>

TASK <span class="o">[</span>vpc : Set Public Subnet ID in variable<span class="o">]</span> *******************************************************
ok: <span class="o">[</span>localhost<span class="o">]</span>

TASK <span class="o">[</span>vpc : Create Internet Gateway <span class="k">for</span> VPC<span class="o">]</span> ********************************************************
changed: <span class="o">[</span>localhost<span class="o">]</span>

TASK <span class="o">[</span>vpc : Set Internet Gateway ID in variable<span class="o">]</span> ****************************************************
ok: <span class="o">[</span>localhost<span class="o">]</span>

TASK <span class="o">[</span>vpc : Set up public subnet route table<span class="o">]</span> *******************************************************
changed: <span class="o">[</span>localhost<span class="o">]</span>

PLAY RECAP ******************************************************************************************
localhost                  : <span class="nv">ok</span><span class="o">=</span><span class="m">8</span>    <span class="nv">changed</span><span class="o">=</span><span class="m">4</span>    <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span>    <span class="nv">failed</span><span class="o">=</span><span class="m">0</span>
</code></pre></td></tr></table>
</div>
</div><p>AWS에서 확인해보면 잘 생성된걸 볼 수 있다.</p>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-246-61c236a3-ff6c-4084-a564-62e407582654.43.58.png" title="ansible" data-thumbnail="/ansible1/2019-01-246-61c236a3-ff6c-4084-a564-62e407582654.43.58.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-246-61c236a3-ff6c-4084-a564-62e407582654.43.58.png"
            data-srcset="/ansible1/2019-01-246-61c236a3-ff6c-4084-a564-62e407582654.43.58.png, 2019-01-246-61c236a3-ff6c-4084-a564-62e407582654.43.58.png 1.5x, /ansible1/2019-01-246-61c236a3-ff6c-4084-a564-62e407582654.43.58.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-246-61c236a3-ff6c-4084-a564-62e407582654.43.58.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p><code>peering</code> 을 하기 위해서 다른 리전에 vpc를 새로 생성했다. 위의  <code>vars.yml</code>  파일의 내용을 변경하면 된다.</p>
<ol>
<li>aws_region  변경</li>
<li>vpc_cidr_block  변경</li>
<li>public_subnet_1_cidr 변경</li>
</ol>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-246-7703bf1b-6579-4906-bace-888fdb9d61a7.46.52.png" title="ansible" data-thumbnail="/ansible1/2019-01-246-7703bf1b-6579-4906-bace-888fdb9d61a7.46.52.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-246-7703bf1b-6579-4906-bace-888fdb9d61a7.46.52.png"
            data-srcset="/ansible1/2019-01-246-7703bf1b-6579-4906-bace-888fdb9d61a7.46.52.png, 2019-01-246-7703bf1b-6579-4906-bace-888fdb9d61a7.46.52.png 1.5x, /ansible1/2019-01-246-7703bf1b-6579-4906-bace-888fdb9d61a7.46.52.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-246-7703bf1b-6579-4906-bace-888fdb9d61a7.46.52.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p>peering을 하려면 겹치기 않게 CIDR 블록을 다르게 설정해야 한다. 위의 사진에서 생성한 VPC를 보면 두 개가 서로 다른 것을 볼 수 있다.</p>
<p>생성이 완료 되었으니 수동으로 peering을 해보자. 다음 글에서는 Ansible에서 peering까지 다뤄 볼 예정이다.</p>
<h3 id="peering">Peering</h3>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-246-805552e7-faa0-40ea-9ccd-41b07eac0fbb.51.25.png" title="ansible" data-thumbnail="/ansible1/2019-01-246-805552e7-faa0-40ea-9ccd-41b07eac0fbb.51.25.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-246-805552e7-faa0-40ea-9ccd-41b07eac0fbb.51.25.png"
            data-srcset="/ansible1/2019-01-246-805552e7-faa0-40ea-9ccd-41b07eac0fbb.51.25.png, 2019-01-246-805552e7-faa0-40ea-9ccd-41b07eac0fbb.51.25.png 1.5x, /ansible1/2019-01-246-805552e7-faa0-40ea-9ccd-41b07eac0fbb.51.25.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-246-805552e7-faa0-40ea-9ccd-41b07eac0fbb.51.25.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p>AWS vpc에 들어오면 피어링 연결 목록이 있다.</p>
<p>생성을 누르고 설정을 해준다.</p>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-246-06a44ac6-80f6-45cb-b2f8-c24df3f46d0b.52.50.png" title="ansible" data-thumbnail="/ansible1/2019-01-246-06a44ac6-80f6-45cb-b2f8-c24df3f46d0b.52.50.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-246-06a44ac6-80f6-45cb-b2f8-c24df3f46d0b.52.50.png"
            data-srcset="/ansible1/2019-01-246-06a44ac6-80f6-45cb-b2f8-c24df3f46d0b.52.50.png, 2019-01-246-06a44ac6-80f6-45cb-b2f8-c24df3f46d0b.52.50.png 1.5x, /ansible1/2019-01-246-06a44ac6-80f6-45cb-b2f8-c24df3f46d0b.52.50.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-246-06a44ac6-80f6-45cb-b2f8-c24df3f46d0b.52.50.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p>피어링 연결 이름 태그에는 이름을 써주고</p>
<p>로컬 VPC는 현재 접속중인 리전의 VPC를 선택한다.</p>
<p>피어링할 다른 VPC 선택 항목에서는 아까 다른 리전에 생성한 VPC를 써준다. 만약 다른 계정이라면 다른 계정을 선택. 현재 리전의 VPC 피어링도 가능하다.</p>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-246-c11ebe08-35a3-4ddd-a93d-490e3064062c.55.25.png" title="ansible" data-thumbnail="/ansible1/2019-01-246-c11ebe08-35a3-4ddd-a93d-490e3064062c.55.25.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-246-c11ebe08-35a3-4ddd-a93d-490e3064062c.55.25.png"
            data-srcset="/ansible1/2019-01-246-c11ebe08-35a3-4ddd-a93d-490e3064062c.55.25.png, 2019-01-246-c11ebe08-35a3-4ddd-a93d-490e3064062c.55.25.png 1.5x, /ansible1/2019-01-246-c11ebe08-35a3-4ddd-a93d-490e3064062c.55.25.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-246-c11ebe08-35a3-4ddd-a93d-490e3064062c.55.25.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p>상태가 수락 대기중이다. 연결 할 리전의 VPC에 들어가서 수락을 해준다.</p>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-246-57ca8f35-883e-4497-840c-2a9c27308e65.56.18.png" title="ansible" data-thumbnail="/ansible1/2019-01-246-57ca8f35-883e-4497-840c-2a9c27308e65.56.18.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-246-57ca8f35-883e-4497-840c-2a9c27308e65.56.18.png"
            data-srcset="/ansible1/2019-01-246-57ca8f35-883e-4497-840c-2a9c27308e65.56.18.png, 2019-01-246-57ca8f35-883e-4497-840c-2a9c27308e65.56.18.png 1.5x, /ansible1/2019-01-246-57ca8f35-883e-4497-840c-2a9c27308e65.56.18.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-246-57ca8f35-883e-4497-840c-2a9c27308e65.56.18.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p>수락하게 되면 상태가 활성화 되면서 연결에 성공하였다.</p>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-246-f2389532-6121-4d66-92ff-19f7ac57e637.57.25.png" title="ansible" data-thumbnail="/ansible1/2019-01-246-f2389532-6121-4d66-92ff-19f7ac57e637.57.25.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-246-f2389532-6121-4d66-92ff-19f7ac57e637.57.25.png"
            data-srcset="/ansible1/2019-01-246-f2389532-6121-4d66-92ff-19f7ac57e637.57.25.png, 2019-01-246-f2389532-6121-4d66-92ff-19f7ac57e637.57.25.png 1.5x, /ansible1/2019-01-246-f2389532-6121-4d66-92ff-19f7ac57e637.57.25.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-246-f2389532-6121-4d66-92ff-19f7ac57e637.57.25.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p>하지만 각 VPC에 연결된 Instance끼리 통신은 안될 것이다. 그 이유는 라우팅 테이블에 명시를 해줘야한다.</p>
<p><strong>라우팅 테이블</strong></p>
<p>왼쪽항목에 라우팅 테이블이 있고 선택하면 아까 생성한 VPC에 연결된 라우팅 테이블이 있을것이다.</p>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-246-10bc1845-d13d-4704-bb48-6cc84b7a6d04.59.06.png" title="ansible" data-thumbnail="/ansible1/2019-01-246-10bc1845-d13d-4704-bb48-6cc84b7a6d04.59.06.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-246-10bc1845-d13d-4704-bb48-6cc84b7a6d04.59.06.png"
            data-srcset="/ansible1/2019-01-246-10bc1845-d13d-4704-bb48-6cc84b7a6d04.59.06.png, 2019-01-246-10bc1845-d13d-4704-bb48-6cc84b7a6d04.59.06.png 1.5x, /ansible1/2019-01-246-10bc1845-d13d-4704-bb48-6cc84b7a6d04.59.06.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-246-10bc1845-d13d-4704-bb48-6cc84b7a6d04.59.06.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p>선택을 하고 밑쪽에 Routes에 들어가 Edit routes를 클릭한다.</p>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-247-15d67937-7be9-4fa2-b5fb-ef0b7758828c.00.53.png" title="ansible" data-thumbnail="/ansible1/2019-01-247-15d67937-7be9-4fa2-b5fb-ef0b7758828c.00.53.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-247-15d67937-7be9-4fa2-b5fb-ef0b7758828c.00.53.png"
            data-srcset="/ansible1/2019-01-247-15d67937-7be9-4fa2-b5fb-ef0b7758828c.00.53.png, 2019-01-247-15d67937-7be9-4fa2-b5fb-ef0b7758828c.00.53.png 1.5x, /ansible1/2019-01-247-15d67937-7be9-4fa2-b5fb-ef0b7758828c.00.53.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-247-15d67937-7be9-4fa2-b5fb-ef0b7758828c.00.53.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p>Add route를 선택하고 추가해준다.</p>
<p><figure><a class="lightgallery" href="/ansible1/2019-01-247-cea3843a-0760-42fa-8b63-40c95550233c.02.00.png" title="ansible" data-thumbnail="/ansible1/2019-01-247-cea3843a-0760-42fa-8b63-40c95550233c.02.00.png" data-sub-html="<h2>ansible</h2><p>ansible</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="2019-01-247-cea3843a-0760-42fa-8b63-40c95550233c.02.00.png"
            data-srcset="/ansible1/2019-01-247-cea3843a-0760-42fa-8b63-40c95550233c.02.00.png, 2019-01-247-cea3843a-0760-42fa-8b63-40c95550233c.02.00.png 1.5x, /ansible1/2019-01-247-cea3843a-0760-42fa-8b63-40c95550233c.02.00.png 2x"
            data-sizes="auto"
            alt="/ansible1/2019-01-247-cea3843a-0760-42fa-8b63-40c95550233c.02.00.png" />
    </a><figcaption class="image-caption">ansible</figcaption>
    </figure></p>
<p>internet Gateway를 선택하고 다른 리전에 있는 internet gateway의 ID를 입력해준다.</p>
<p>save하면 이제 통신이 잘 될것이다!!!</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2019-01-24</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/ansible1/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://example.org/ansible1/" data-title="Create aws vpc using ansible" data-hashtags="ansible,aws,devops"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://example.org/ansible1/" data-hashtag="ansible"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="http://example.org/ansible1/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Share on WhatsApp" data-sharer="whatsapp" data-url="http://example.org/ansible1/" data-title="Create aws vpc using ansible" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://example.org/ansible1/" data-title="Create aws vpc using ansible"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="Share on Evernote" data-sharer="evernote" data-url="http://example.org/ansible1/" data-title="Create aws vpc using ansible"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/ansible/">ansible</a>,&nbsp;<a href="/tags/aws/">aws</a>,&nbsp;<a href="/tags/devops/">devops</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/argo/" class="prev" rel="prev" title="Argo"><i class="fas fa-angle-left fa-fw"></i>Argo</a>
            <a href="/searchguard/" class="next" rel="next" title="Search guard kibana plugin">Search guard kibana plugin<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.80.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">jaejin</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script type="text/javascript" src="https://https-jaejin1-github-io.disqus.com/embed.js" defer></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":100},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
